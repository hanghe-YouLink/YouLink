<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bulma CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css">

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
            integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
            crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/css?family=Stylish&display=swap" rel="stylesheet">
    <title>POSTING | YOULINK</title>
    <style>
        @font-face {
            font-family: 'SLEIGothicTTF';
            src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2104@1.0/SLEIGothicTTF.woff') format('woff');
            font-weight: normal;
            font-style: normal;
        }

        * {
            font-family: 'SLEIGothicTTF';
        }

        .navi {
            width: 1200px;
            margin: auto;
        }

        .button {
            font-family: 'SLEIGothicTTF';
        }

        .box {
            margin: 20px auto;
            width: 800px;
        }

        .user_id {
            margin-bottom: 10px;
        }

        a:hover {
            text-decoration: none;
        }

        .nav-logo img {
            margin-top: 10px;
        }

    </style>
    <script>
        // ë“±ë¡í•˜ê¸° ë²„íŠ¼ì— ë“¤ì–´ê°€ëŠ” í•¨ìˆ˜
        function postArticle() {
            let title = $('#post-title').val()
            let url = $('#post-url').val()
            let comment = $('#post-comment').val()

            if (title == '' && url == '' && comment == '') {
                alert('ì¹¸ì„ ë¹„ìš°ì§€ ë§ê³  ì…ë ¥í•´ ì£¼ì„¸ìš”!')
            } else {
                $.ajax({
                    type: "POST",
                    url: "/api/posting",
                    data: {
                        title_give: title,
                        url_give: url,
                        comment_give: comment
                    },
                    success: function (response) { // ì„±ê³µí•˜ë©´
                        alert(response["msg"]);
                        window.location.href = "/"
                    }
                })
            }
        }

        // ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ì— ë“¤ì–´ê°€ëŠ” í•¨ìˆ˜ (í† í°ì„ ì‚­ì œì‹œí‚¨ë‹¤.)
        function sign_out() {
            $.removeCookie('mytoken', {path: '/'});
            alert('ë¡œê·¸ì•„ì›ƒ!')
            window.location.href = "/login"
        }

        // ë©”ì¸í˜ì´ì§€ë¡œ ì´ë™ ì‹œí‚¤ëŠ” í•¨ìˆ˜
        function main_page() {
            window.location.href = '/'
        }
    </script>

</head>
<body>
<!--ë‚´ë¹„ë°”-->
<div class="navi">
    <nav class="navbar" role="navigation" aria-label="main navigation">
        <div>
            <a class="nav-logo" href="/">
                <img src="/static/logo_mini1.png" width="150px" height="120px">
            </a>
        </div>
        <div class="navbar-end">
            <div class="navbar-item">
                <div class="buttons">
                    <span class="user_id">{{ nickname }} ë‹˜</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <a class="button is-dark" onclick="sign_out()" style="color: white">
                        <strong>ë¡œê·¸ì•„ì›ƒ</strong>
                    </a>
                </div>
            </div>
        </div>
    </nav>
</div>
<hr>
<form class="box">
    <!--ì œëª© ì…ë ¥-->
    <div class="field">
        <label class="label">ì œëª©</label>
        <div class="field has-addons">
            <div class="control is-expanded">
                <input class="input" type="text" id="post-title" placeholder="">
            </div>
        </div>
        <!--ì±„ë„ URL ì…ë ¥-->
        <div class="field">
            <label class="label">ì±„ë„ URL</label>
            <div class="control">
                <input class="input" id="post-url" placeholder="" value="">
            </div>
        </div>
        <!--ê°„ë‹¨ ì±„ë„ ì†Œê°œ ì…ë ¥-->
        <div class="field">
            <label class="label">ê°„ë‹¨ ì±„ë„ ì†Œê°œ</label>
            <div class="field has-addons">
                <div class="control is-expanded">
                    <textarea class="textarea" id="post-comment" placeholder="ex) ë©‹ì§„ ì±„ë„ ğŸ˜†"></textarea>
                </div>
            </div>
        </div>
    </div>
</form>

<!-- ë²„íŠ¼ ì˜ì—­ -->
<div class="field is-grouped is-grouped-centered">
    <p class="control">
        <a class="button is-dark" onclick="postArticle()" style="color: white">
            ë“±ë¡í•˜ê¸°
        </a>
    </p>
    <p class="control">
        <a class="button is-light" onclick="main_page()">
            ëª©ë¡
        </a>
    </p>
</div>

</body>
</html>